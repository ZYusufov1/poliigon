(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,s=0;s<e.length;s++)if(e[s].identifier===t){n=s;break}return n}function s(t,s){for(var o={},r=[],a=0;a<t.length;a++){var c=t[a],A=s.base?c[0]+s.base:c[0],l=o[A]||0,d="".concat(A," ").concat(l);o[A]=l+1;var h=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var u=i(p,s);s.byIndex=a,e.splice(a,0,{identifier:d,updater:u,references:1})}r.push(d)}return r}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=s(t=t||[],i=i||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var a=n(o[r]);e[a].references--}for(var c=s(t,i),A=0;A<o.length;A++){var l=n(o[A]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",s=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),s&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),s&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,s,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(r[c]=!0)}for(var A=0;A<t.length;A++){var l=[].concat(t[A]);s&&r[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},354:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},365:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(354),i=n.n(s),o=n(314),r=n.n(o)()(i());r.push([t.id,"app-root, buffer-zone, work-zone { display: block; }\n\n:root {\n    --bg: #222;\n    --panel: #2b2b2b;\n    --panel-2: #333;\n    --text: #e8e8e8;\n    --accent: #a00019;\n    --grid: #565656;\n    --tick: #a0a0a0;\n    --btn-bg: #4a4a4a;\n    --btn-bg-hover: #5a5a5a;\n    --btn-text: #f1f1f1;\n    --sep: #bfbfbf22;\n}\n\n* { box-sizing: border-box; }\nhtml, body { height: 100%; }\nbody {\n    margin: 0;\n    background: var(--bg);\n    color: var(--text);\n    font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\n}\n\n.app { max-width: 1080px; margin: 16px auto; padding: 12px; }\n\n.toolbar { display: flex; gap: 12px; margin-bottom: 8px; align-items: center; }\n.toolbar button {\n    border: 0; border-radius: 6px; padding: 8px 12px;\n    background: var(--btn-bg); color: var(--btn-text); cursor: pointer;\n}\n.toolbar button:hover { background: var(--btn-bg-hover); }\n.toolbar .spacer { flex: 1; }\n.toolbar .hint { opacity: .8; font-size: 12px; }\n\n.zone { background: var(--panel); border-radius: 6px; padding: 8px; border: 1px solid var(--sep); }\n.zone + .zone { margin-top: 10px; }\n\nsvg { display: block; width: 100%; height: 260px; background: var(--panel-2); border-radius: 4px; }\n\n.header { display: flex; justify-content: space-between; align-items: center; color: #cfcfcf; margin: 4px 2px 8px; font-weight: 600; }\n\n.buffer svg { background: #2e2e2e; }\n.work   svg { background: #2e2e2e; }\n\n.badge { font-size: 12px; opacity: .8; }\n\n.grid-line { stroke: var(--grid); stroke-width: 1; vector-effect: non-scaling-stroke; }\n.axis-text { fill: var(--tick); font-size: 10px; user-select: none; }\n.poly      { fill: var(--accent); cursor: grab; }\n.poly:active { cursor: grabbing; }\n\n.drop-highlight { outline: 2px solid #d0d0d0; outline-offset: 2px; }\n","",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA,mCAAmC,cAAc,EAAE;;AAEnD;IACI,UAAU;IACV,gBAAgB;IAChB,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,eAAe;IACf,eAAe;IACf,iBAAiB;IACjB,uBAAuB;IACvB,mBAAmB;IACnB,gBAAgB;AACpB;;AAEA,IAAI,sBAAsB,EAAE;AAC5B,aAAa,YAAY,EAAE;AAC3B;IACI,SAAS;IACT,qBAAqB;IACrB,kBAAkB;IAClB,4EAA4E;AAChF;;AAEA,OAAO,iBAAiB,EAAE,iBAAiB,EAAE,aAAa,EAAE;;AAE5D,WAAW,aAAa,EAAE,SAAS,EAAE,kBAAkB,EAAE,mBAAmB,EAAE;AAC9E;IACI,SAAS,EAAE,kBAAkB,EAAE,iBAAiB;IAChD,yBAAyB,EAAE,sBAAsB,EAAE,eAAe;AACtE;AACA,wBAAwB,+BAA+B,EAAE;AACzD,mBAAmB,OAAO,EAAE;AAC5B,iBAAiB,WAAW,EAAE,eAAe,EAAE;;AAE/C,QAAQ,wBAAwB,EAAE,kBAAkB,EAAE,YAAY,EAAE,4BAA4B,EAAE;AAClG,gBAAgB,gBAAgB,EAAE;;AAElC,MAAM,cAAc,EAAE,WAAW,EAAE,aAAa,EAAE,0BAA0B,EAAE,kBAAkB,EAAE;;AAElG,UAAU,aAAa,EAAE,8BAA8B,EAAE,mBAAmB,EAAE,cAAc,EAAE,mBAAmB,EAAE,gBAAgB,EAAE;;AAErI,cAAc,mBAAmB,EAAE;AACnC,cAAc,mBAAmB,EAAE;;AAEnC,SAAS,eAAe,EAAE,WAAW,EAAE;;AAEvC,aAAa,mBAAmB,EAAE,eAAe,EAAE,iCAAiC,EAAE;AACtF,aAAa,iBAAiB,EAAE,eAAe,EAAE,iBAAiB,EAAE;AACpE,aAAa,mBAAmB,EAAE,YAAY,EAAE;AAChD,eAAe,gBAAgB,EAAE;;AAEjC,kBAAkB,0BAA0B,EAAE,mBAAmB,EAAE",sourcesContent:["app-root, buffer-zone, work-zone { display: block; }\n\n:root {\n    --bg: #222;\n    --panel: #2b2b2b;\n    --panel-2: #333;\n    --text: #e8e8e8;\n    --accent: #a00019;\n    --grid: #565656;\n    --tick: #a0a0a0;\n    --btn-bg: #4a4a4a;\n    --btn-bg-hover: #5a5a5a;\n    --btn-text: #f1f1f1;\n    --sep: #bfbfbf22;\n}\n\n* { box-sizing: border-box; }\nhtml, body { height: 100%; }\nbody {\n    margin: 0;\n    background: var(--bg);\n    color: var(--text);\n    font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\n}\n\n.app { max-width: 1080px; margin: 16px auto; padding: 12px; }\n\n.toolbar { display: flex; gap: 12px; margin-bottom: 8px; align-items: center; }\n.toolbar button {\n    border: 0; border-radius: 6px; padding: 8px 12px;\n    background: var(--btn-bg); color: var(--btn-text); cursor: pointer;\n}\n.toolbar button:hover { background: var(--btn-bg-hover); }\n.toolbar .spacer { flex: 1; }\n.toolbar .hint { opacity: .8; font-size: 12px; }\n\n.zone { background: var(--panel); border-radius: 6px; padding: 8px; border: 1px solid var(--sep); }\n.zone + .zone { margin-top: 10px; }\n\nsvg { display: block; width: 100%; height: 260px; background: var(--panel-2); border-radius: 4px; }\n\n.header { display: flex; justify-content: space-between; align-items: center; color: #cfcfcf; margin: 4px 2px 8px; font-weight: 600; }\n\n.buffer svg { background: #2e2e2e; }\n.work   svg { background: #2e2e2e; }\n\n.badge { font-size: 12px; opacity: .8; }\n\n.grid-line { stroke: var(--grid); stroke-width: 1; vector-effect: non-scaling-stroke; }\n.axis-text { fill: var(--tick); font-size: 10px; user-select: none; }\n.poly      { fill: var(--accent); cursor: grab; }\n.poly:active { cursor: grabbing; }\n\n.drop-highlight { outline: 2px solid #d0d0d0; outline-offset: 2px; }\n"],sourceRoot:""}]);const a=r},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,n){var s=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={id:s,exports:{}};return t[s](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var s=n(72),i=n.n(s),o=n(825),r=n.n(o),a=n(659),c=n.n(a),A=n(56),l=n.n(A),d=n(540),h=n.n(d),p=n(113),u=n.n(p),g=n(365),f={};function b(t,e){return Math.floor(Math.random()*(e-t+1))+t}function v(t=5,e=20,n=60){const s=Array.from({length:t},()=>Math.random()*Math.PI*2).sort((t,e)=>t-e).map(t=>{const s=e+Math.random()*(n-e);return[Math.cos(t)*s,Math.sin(t)*s]}),i=s.map(t=>t[0]),o=s.map(t=>t[1]),r=Math.min(...i),a=Math.min(...o);return s.map(([t,e])=>[t-r,e-a])}function x(t){const e=t.map(t=>t[0]),n=t.map(t=>t[1]),s=Math.min(...e),i=Math.max(...e),o=Math.min(...n),r=Math.max(...n);return{minX:s,minY:o,maxX:i,maxY:r,w:i-s,h:r-o}}function m(t,e=0,n=0){return t.map(([t,s])=>`${t+e},${s+n}`).join(" ")}f.styleTagTransform=u(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),i()(g.A,f),g.A&&g.A.locals&&g.A.locals;const y="wc-polygons-v1";function E(t,e,n=4){return!(t.x+t.w+n<e.x||e.x+e.w+n<t.x||t.y+t.h+n<e.y||e.y+e.h+n<t.y)}class B{constructor(){this.polygons=[],this.view={scale:1,tx:0,ty:0},this._id=1}load(){const t=localStorage.getItem(y);if(!t)return!1;try{const e=JSON.parse(t);return this.polygons=e.polygons||[],this.view=e.view||{scale:1,tx:0,ty:0},this._id=this.polygons.reduce((t,e)=>Math.max(t,e.id),0)+1,!0}catch{return!1}}save(){localStorage.setItem(y,JSON.stringify({polygons:this.polygons,view:this.view}))}reset(){localStorage.removeItem(y),this.polygons=[],this.view={scale:1,tx:0,ty:0},this._id=1}createRandomInBuffer(t,e){this.polygons=this.polygons.filter(t=>"buffer"!==t.zone);const n=b(5,20),s=[],i=10;for(let o=0;o<n;o++){const n=v(b(3,8),18,50),o=x(n);let r,a,c=0;do{r=b(i,Math.max(i,t-o.w-i)),a=b(i,Math.max(i,e-o.h-i));const n={x:r,y:a,w:o.w,h:o.h};if(!s.some(t=>E(n,t,6))){s.push(n);break}c++}while(c<200);this.polygons.push({id:this._id++,points:n,pos:{x:r,y:a},zone:"buffer"})}}byZone(t){return this.polygons.filter(e=>e.zone===t)}moveTo(t,e,n){const s=this.polygons.find(e=>e.id===t);s&&(s.zone=e,s.pos={x:n.x,y:n.y})}setView(t){this.view={...this.view,...t}}}class w extends HTMLElement{constructor(){super(),this.store=null,this.svg=null}connectedCallback(){this.innerHTML="<svg></svg>",this.svg=this.querySelector("svg");const t=new ResizeObserver(()=>this.render());t.observe(this),this._ro=t,this.svg.addEventListener("pointerdown",t=>{const e=t.target.closest("polygon");if(!e)return;const n=Number(e.getAttribute("data-id")),s=this.clientToLocal(t.clientX,t.clientY),i=this.store.polygons.find(t=>t.id===n),o={x:s.x-i.pos.x,y:s.y-i.pos.y};this.dispatchEvent(new CustomEvent("poly-drag-start",{bubbles:!0,composed:!0,detail:{id:n,zone:"buffer",offset:o}}))})}disconnectedCallback(){this._ro?.disconnect()}setData(t){this.store=t,this.render()}getSize(){const t=this.getBoundingClientRect();return{width:t.width>0?t.width:this.parentElement?.getBoundingClientRect().width||800,height:t.height>40?t.height:260}}hitTest(t,e){const n=this.getBoundingClientRect();return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}clientToLocal(t,e){const n=this.getBoundingClientRect();return{x:t-n.left,y:e-n.top}}render(){if(!this.store)return;const{width:t,height:e}=this.getSize();this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`),this.svg.setAttribute("width",t),this.svg.setAttribute("height",e);const n=this.store.byZone("buffer").map(t=>`<polygon class="poly" data-id="${t.id}" points="${m(t.points,t.pos.x,t.pos.y)}"></polygon>`).join("");this.svg.innerHTML=n}}customElements.define("buffer-zone",w);class C extends HTMLElement{constructor(){super(),this.store=null,this.state={scale:1,tx:0,ty:0,panning:!1,panStart:null,panOrigin:null}}connectedCallback(){this.innerHTML='\n                      <svg>\n                        <g id="grid"></g>\n                        <g id="content"></g>\n                        <g id="overlay"></g>\n                      </svg>\n                    ',this.svg=this.querySelector("svg"),this.gridG=this.querySelector("#grid"),this.contentG=this.querySelector("#content");const t=new ResizeObserver(()=>this.render());t.observe(this),this._ro=t,this.svg.addEventListener("wheel",t=>{t.preventDefault();const e=t.deltaY<0?1.1:.9;this.zoomAtClient(t.clientX,t.clientY,e)},{passive:!1}),this.svg.addEventListener("pointerdown",t=>{const e=t.target.closest("polygon");if(e){const n=Number(e.getAttribute("data-id")),s=this.clientToWorld(t.clientX,t.clientY),i=this.store.polygons.find(t=>t.id===n),o={x:s.x-i.pos.x,y:s.y-i.pos.y};return void this.dispatchEvent(new CustomEvent("poly-drag-start",{bubbles:!0,composed:!0,detail:{id:n,zone:"work",offset:o}}))}this.state.panning=!0,this.state.panOrigin={x:t.clientX,y:t.clientY},this.state.panStart={tx:this.state.tx,ty:this.state.ty},this.svg.setPointerCapture(t.pointerId)}),window.addEventListener("pointermove",t=>{if(!this.state.panning)return;const e=t.clientX-this.state.panOrigin.x,n=t.clientY-this.state.panOrigin.y;this.state.tx=this.state.panStart.tx+e,this.state.ty=this.state.panStart.ty+n,this.store.setView({tx:this.state.tx,ty:this.state.ty}),this.render()}),window.addEventListener("pointerup",()=>{this.state.panning=!1})}disconnectedCallback(){this._ro?.disconnect()}setData(t){this.store=t,this.state.scale=t.view.scale,this.state.tx=t.view.tx,this.state.ty=t.view.ty,this.render()}resetView(){this.state={scale:1,tx:0,ty:0,panning:!1,panStart:null,panOrigin:null},this.store?.setView({scale:1,tx:0,ty:0})}getSize(){const t=this.getBoundingClientRect();return{width:Math.max(10,t.width),height:Math.max(10,t.height)}}hitTest(t,e){const n=this.getBoundingClientRect();return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}clientToWorld(t,e){const n=this.getBoundingClientRect();return{x:(t-n.left-this.state.tx)/this.state.scale,y:(e-n.top-this.state.ty)/this.state.scale}}zoomAtClient(t,e,n){const s=this.getBoundingClientRect(),i=this.clientToWorld(t,e),o=Math.min(10,Math.max(.25,this.state.scale*n));this.state.scale=o,this.state.tx=t-s.left-i.x*o,this.state.ty=e-s.top-i.y*o,this.store.setView({scale:this.state.scale,tx:this.state.tx,ty:this.state.ty}),this.render()}drawGrid(t,e){const n=this.state.scale,s=this.state.tx,i=this.state.ty,o=-s/n,r=(t-s)/n,a=-i/n,c=(e-i)/n,A=function(t,e){const n=60/Math.max(e,1e-6),s=Math.floor(Math.log10(n)),i=Math.pow(10,s);for(const t of[1,2,5,10]){const e=t*i;if(e>=n)return e}return 10*i}(0,n),l=Math.floor(o/A)*A,d=Math.floor(a/A)*A,h=[],p=[];for(let t=l;t<=r;t+=A){const i=t*n+s;h.push(`<line class="grid-line" x1="${i}" y1="0" x2="${i}" y2="${e}"/>`),p.push(`<text class="axis-text" x="${i+2}" y="${e-4}">${k(t)}</text>`)}for(let e=d;e<=c;e+=A){const s=e*n+i;h.push(`<line class="grid-line" x1="0" y1="${s}" x2="${t}" y2="${s}"/>`),p.push(`<text class="axis-text" x="4" y="${s-2}">${k(e)}</text>`)}this.gridG.innerHTML=h.join("")+p.join("")}render(){if(!this.store)return;const{width:t,height:e}=this.getSize();this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`),this.svg.setAttribute("width",t),this.svg.setAttribute("height",e),this.drawGrid(t,e);const n=`translate(${this.state.tx},${this.state.ty}) scale(${this.state.scale})`;this.contentG.setAttribute("transform",n);const s=this.store.byZone("work").map(t=>`<polygon class="poly" data-id="${t.id}" points="${m(t.points,t.pos.x,t.pos.y)}"></polygon>`).join("");this.contentG.innerHTML=s}}function k(t){const e=Math.abs(t);return e>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"k":e>=100?Math.round(t):e>=10?(Math.round(10*t)/10).toFixed(1).replace(/\.0$/,""):(Math.round(100*t)/100).toFixed(2).replace(/0+$/,"").replace(/\.$/,"")}customElements.define("work-zone",C);class M extends HTMLElement{constructor(){super(),this.store=new B,this.drag=null}connectedCallback(){this.innerHTML='\n          <div class="app">\n            <div class="toolbar">\n              <button id="btnCreate">Создать</button>\n              <button id="btnSave">Сохранить</button>\n              <button id="btnReset">Сбросить</button>\n              <span class="spacer"></span>\n              <span class="hint">Зум - колесо мыши, панорамирование - ЛКМ по пустому месту</span>\n            </div>\n    \n            <div class="zone buffer">\n              <div class="header">\n                <span>Буферная зона</span>\n                <span class="badge" id="bufCount"></span>\n              </div>\n              <buffer-zone id="buffer"></buffer-zone>\n            </div>\n    \n            <div class="zone work">\n              <div class="header">\n                <span>Рабочая зона</span>\n                <span class="badge" id="workCount"></span>\n              </div>\n              <work-zone id="work"></work-zone>\n            </div>\n          </div>\n        ';const t=this.$("#buffer"),e=this.$("#work"),n=this.store.load();t.setData(this.store),e.setData(this.store),this.updateCounters(),this.$("#btnCreate").addEventListener("click",()=>{const e=t.getSize();this.store.createRandomInBuffer(e.width,e.height),t.render(),this.updateCounters()}),this.$("#btnSave").addEventListener("click",()=>{this.store.save(),this.flash("Сохранено")}),this.$("#btnReset").addEventListener("click",()=>{this.store.reset(),t.render(),e.resetView(),e.render(),this.updateCounters(),this.flash("Данные очищены")}),this.addEventListener("poly-drag-start",t=>this.onDragStart(t.detail)),window.addEventListener("pointermove",t=>this.onDragMove(t)),window.addEventListener("pointerup",()=>this.onDragEnd()),n&&(t.render(),e.render(),this.updateCounters())}$(t){return this.querySelector(t)}updateCounters(){this.$("#bufCount").textContent=`полигонов: ${this.store.byZone("buffer").length}`,this.$("#workCount").textContent=`полигонов: ${this.store.byZone("work").length}`}flash(t){const e=document.title;document.title=`✓ ${t}`,setTimeout(()=>document.title=e,1200)}onDragStart({id:t,zone:e,offset:n}){this.drag={id:t,zone:e,offset:n},this.$("#buffer").classList.add("drop-highlight"),this.$("#work").classList.add("drop-highlight")}onDragMove(t){if(!this.drag)return;const e=this.$("#buffer"),n=this.$("#work"),s=e.hitTest(t.clientX,t.clientY),i=n.hitTest(t.clientX,t.clientY);if(s){const s=e.clientToLocal(t.clientX,t.clientY),i={x:s.x-this.drag.offset.x,y:s.y-this.drag.offset.y};this.store.moveTo(this.drag.id,"buffer",i),e.render(),n.render()}else if(i){const s=n.clientToWorld(t.clientX,t.clientY),i={x:s.x-this.drag.offset.x,y:s.y-this.drag.offset.y};this.store.moveTo(this.drag.id,"work",i),e.render(),n.render()}this.updateCounters()}onDragEnd(){this.drag&&(this.drag=null,this.$("#buffer").classList.remove("drop-highlight"),this.$("#work").classList.remove("drop-highlight"))}}customElements.define("app-root",M)})();
//# sourceMappingURL=bundle.9e1cddcd34f71d102a25.js.map